<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="rgb(46, 44, 79)">
  <meta name="description" content="JavaScript ä¸­çš„å‡½æ•°æŸ¯é‡ŒåŒ–ã€åå‡½æ•°ä»¥åŠæƒ°æ€§å‡½æ•°">
  <meta name="keywords" content="JavaScript, TypeScript">
  <title>
    å‡½æ•°æŸ¯é‡ŒåŒ–ã€åå‡½æ•°ä»¥åŠæƒ°æ€§å‡½æ•°
  </title>
  <link rel="stylesheet" href="/public/css/index.css">
  <link rel="stylesheet" href="/public/css/markdown.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <script src="/public/JavaScript/index.js"></script>
</head><header class="blog-header">
  <a href="https://github.com/fwqaaq" target="_blank">
    <img src="https://avatars.githubusercontent.com/u/82551626?v=4" loading="lazy" alt="me" srcset="">
  </a>
  <nav class="header-nav">
    <a class="decoration-line" href="/"><i class="fa-solid fa-house-chimney fa-xs"></i>
      <span class="disappear">Home</span>
    </a>
    <a class="decoration-line" href="/./about/index.html"><i class="fa-solid fa-address-card fa-xs"></i>
      <span class="disappear">About</span></a>
    <a class="decoration-line" href="/./archive/index.html"><i class="fa-solid fa-box-archive fa-xs"></i> <span
        class="disappear">Archive</span></a>
    <a class="decoration-line" href="/./tags/index.html"><i class="fa-solid fa-tag fa-xs"></i> <span
        class="disappear">Tag</span></a>
    <div class="toy"><i class="fa-solid fa-gamepad fa-xs"></i> <span class="disappear">Toy</span>
      <nav class="toy-nav disappear">
        <a class="decoration-line" href="/public/resume/">æˆ‘çš„ç®€å†</a>
        <a class="decoration-line" href="/public/write-css/index.html">å­¦ä¹  UI</a>
      </nav>
    </div>
    <a class="decoration-line" href="/feed.xml"><i class="fa-solid fa-rss fa-xs"></i> <span
        class="disappear">RSS</span></a>
    <a class="decoration-line model" href="#" class="model"><i class="fa-solid fa-sun fa-xs"></i></a>
  </nav>
</header><main class="blog-main">
          <article class="blog-article">
            <h1>å‡½æ•°æŸ¯é‡ŒåŒ–ã€åå‡½æ•°ä»¥åŠæƒ°æ€§å‡½æ•°</h1>
            <hr>
            <h2 id="æŸ¯é‡ŒåŒ–">æŸ¯é‡ŒåŒ–<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#æŸ¯é‡ŒåŒ–"></a></h2>
<div class="markdown-alert markdown-alert-note">
<p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ</p>
<p>åœ¨è®¡ç®—æœºä¸­ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€äº›åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°</p>
</div>
<ul>
<li>ä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> <span class="hl-title function_">add</span>(<span class="hl-params">a: <span class="hl-built_in">number</span>, b: <span class="hl-built_in">number</span></span>) {
  <span class="hl-keyword">return</span> a + b;
}
<span class="hl-comment">//æ‰§è¡Œ add å‡½æ•°ï¼Œä¾æ¬¡ä¼ å…¥ä¸¤ä¸ªå‚æ•°</span>
<span class="hl-title function_">add</span>(<span class="hl-number">1</span>, <span class="hl-number">2</span>);

<span class="hl-comment">//å¦‚æœæœ‰ä¸€ä¸ª carry å‡½æ•°ï¼Œå¯ä»¥åšåˆ°æŸ¯é‡ŒåŒ–</span>
<span class="hl-keyword">let</span> addCurry = <span class="hl-title function_">curry</span>(add);
<span class="hl-title function_">addCurry</span>(<span class="hl-number">1</span>)(<span class="hl-number">2</span>);
</code></pre>
<blockquote>
<p>æŸ¯é‡ŒåŒ–çš„ç”¨é€”å¯ä»¥ç†è§£ä¸ºå‚æ•°å¤ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯é™ä½é€šç”¨æ€§ï¼Œæé«˜é€‚ç”¨æ€§</p>
</blockquote>
<ul>
<li>ä¾‹å¦‚æœ‰ä¸€æ®µè¿™æ ·çš„æ•°æ®</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> person = [{ <span class="hl-attr">name</span>: <span class="hl-string">"zhangsan"</span> }, { <span class="hl-attr">name</span>: <span class="hl-string">"lisi"</span> }];
</code></pre>
<ol>
<li>
<p>ä½¿ç”¨ map å‡½æ•°</p>
<pre><code class="hl language-ts"><span class="hl-keyword">let</span> names = person.<span class="hl-title function_">map</span>(<span class="hl-keyword">function</span> (<span class="hl-params">item</span>) {
  <span class="hl-keyword">return</span> item.<span class="hl-property">name</span>;
});
</code></pre>
</li>
<li>
<p>å¦‚æœå¯¹è±¡ä¸­æœ‰å¤šä¸ªå±æ€§ï¼Œé‚£å°±è¦å†™å¤šä¸ª map æ‰è¡Œ</p>
<pre><code class="hl language-ts"><span class="hl-keyword">let</span> prop = <span class="hl-title function_">curry</span>(<span class="hl-function">(<span class="hl-params">key, obj</span>) =></span> {
  obj[key];
});
<span class="hl-keyword">let</span> name = person.<span class="hl-title function_">map</span>(<span class="hl-title function_">prop</span>(<span class="hl-string">"name"</span>));
</code></pre>
</li>
</ol>
<ul>
<li>è¿™æ ·å°±ä½“ç°å‡ºæŸ¯é‡ŒåŒ–çš„é‡è¦æ€§</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> curry&#x3C;T>(<span class="hl-attr">fn</span>: <span class="hl-title class_">Function</span>): <span class="hl-title class_">Function</span> {
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">...args: T[]</span>) {
    <span class="hl-keyword">if</span> (args.<span class="hl-property">length</span> &#x3C; fn.<span class="hl-property">length</span>) {
      <span class="hl-keyword">return</span> <span class="hl-title function_">curry</span>(fn.<span class="hl-title function_">bind</span>(<span class="hl-variable language_">this</span>, ...args));
    } <span class="hl-keyword">else</span> {
      <span class="hl-keyword">return</span> <span class="hl-title function_">fn</span>(...args);
    }
  };
}

<span class="hl-keyword">function</span> <span class="hl-title function_">add</span>(<span class="hl-params">a: <span class="hl-built_in">number</span>, b: <span class="hl-built_in">number</span>, c: <span class="hl-built_in">number</span></span>) {
  <span class="hl-keyword">return</span> a + b + c;
}

<span class="hl-keyword">let</span> curryAdd = <span class="hl-title function_">curry</span>(add);
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(<span class="hl-title function_">curryAdd</span>(<span class="hl-number">1</span>, <span class="hl-number">3</span>)(<span class="hl-number">3</span>));
</code></pre>
<ul>
<li><code>fn.length</code>å°±æ˜¯è¢«æŸ¯é‡ŒåŒ–å‡½æ•°çš„</li>
<li><code>...args</code>æ˜¯è¢«æŸ¯é‡ŒåŒ–å‡½æ•°çš„è¿”å›å€¼ (curryAdd) ä¼ å…¥çš„ä¸ªæ•°ã€‚ç†æƒ³çŠ¶æ€æ˜¯åªä¼ ä¸€ä¸ª</li>
<li><code>curryAdd</code>æœ¬è´¨ä¸Šæ¥è®²å°±æ˜¯ curry å‡½æ•°çš„è¿”å›å€¼ï¼Œåªæœ‰ curryAdd æœ‰å®å‚ï¼Œargs æ‰ä¼šæœ‰å€¼</li>
</ul>
<ol>
<li>
<p>æ‰§è¡Œ<code>let curryAdd = curry(add)</code>,è¿”å›ä¸€ä¸ªé—­åŒ…</p>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> (<span class="hl-params">...args: T[]</span>) {
    <span class="hl-keyword">if</span> (args.<span class="hl-property">length</span> &#x3C; fn.<span class="hl-property">length</span>) {
      <span class="hl-keyword">return</span> <span class="hl-title function_">curry</span>(fn.<span class="hl-title function_">bind</span>(<span class="hl-literal">null</span>, ...args))
    } <span class="hl-keyword">else</span> {
      <span class="hl-keyword">return</span> <span class="hl-title function_">fn</span>(...args)
    }
  }
</code></pre>
</li>
<li>
<p>æ‰§è¡Œ<code>curryAdd(1,3)</code>å½“å‰çš„<code>fn.length</code>å°±æ˜¯ add å½¢å‚çš„æ•°é‡ 3 å¤§äºå®å‚çš„æ•°é‡ 2</p>
<ul>
<li>åŒæ ·è¿”å›äº†å’Œ 1 ä¸€æ ·çš„ä¸€ä¸ªé—­åŒ…ï¼Œä½†æ˜¯ fn å‘ç”Ÿäº†æ”¹å˜ï¼Œä¼ å…¥çš„æ˜¯<code>fn.bind(null, ...args)</code></li>
<li>æ‰§è¡Œä¸€ä¸ªé€’å½’ï¼Œç”±äº bind å‡½æ•°æ˜¯æŸ¯é‡ŒåŒ–çš„ï¼Œè¿™é‡Œçš„<code>fn.length</code>åœ¨ç»“æŸçš„æ—¶å€™å°±å˜æˆäº† 1</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œ<code>[curryAdd(1,3)](3)</code>å½“å‰çš„<code>fn.length</code>ç”±äºæ˜¯ä¼šæ‰§è¡Œ else çš„å†…å®¹</p>
<ul>
<li><code>add.bind(this, 1 , 3)(3)</code>:è¿™æ ·å°±åˆ©ç”¨ bind å®Œæˆäº†ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„è¿‡ç¨‹</li>
</ul>
</li>
</ol>
<pre><code class="hl language-ts"><span class="hl-keyword">type</span> <span class="hl-title class_">IPerson</span> = {
  <span class="hl-attr">name</span>: <span class="hl-built_in">string</span>;
  <span class="hl-attr">age</span>: <span class="hl-built_in">number</span>;
};

<span class="hl-keyword">const</span> <span class="hl-attr">person</span>: <span class="hl-title class_">IPerson</span>[] = [
  { <span class="hl-attr">name</span>: <span class="hl-string">"zhangsan"</span>, <span class="hl-attr">age</span>: <span class="hl-number">12</span> },
  { <span class="hl-attr">name</span>: <span class="hl-string">"lisi"</span>, <span class="hl-attr">age</span>: <span class="hl-number">100</span> },
];

<span class="hl-keyword">let</span> prop = <span class="hl-title function_">curry</span>(<span class="hl-function">(<span class="hl-params">key: keyof IPerson, obj: IPerson</span>) =></span> {
  <span class="hl-keyword">return</span> obj[key];
});

<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(person.<span class="hl-title function_">map</span>(<span class="hl-title function_">prop</span>(<span class="hl-string">"name"</span>)));
</code></pre>
<h2 id="åå‡½æ•°-partial-function">åå‡½æ•° (Partial Function)<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#åå‡½æ•°-partial-function"></a></h2>
<blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œåå‡½æ•°æ˜¯æŒ‡å›ºå®šä¸€ä¸ªå‡½æ•°çš„ä¸€äº›å‚æ•°ï¼Œç„¶åäº§ç”Ÿå¦ä¸€ä¸ªæ›´å°å…ƒçš„å‡½æ•°ã€‚</p>
<p>ä»€ä¹ˆæ˜¯å…ƒï¼Ÿå…ƒæ˜¯æŒ‡å‡½æ•°å‚æ•°çš„ä¸ªæ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è¢«ç§°ä¸ºäºŒå…ƒå‡½æ•°ã€‚</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> <span class="hl-title function_">add</span>(<span class="hl-params">a, b</span>) {
  <span class="hl-keyword">return</span> a + b;
}

<span class="hl-comment">// æ‰§è¡Œ add å‡½æ•°ï¼Œä¸€æ¬¡ä¼ å…¥ä¸¤ä¸ªå‚æ•°å³å¯</span>
<span class="hl-title function_">add</span>(<span class="hl-number">1</span>, <span class="hl-number">2</span>); <span class="hl-comment">// 3</span>

<span class="hl-comment">// å‡è®¾æœ‰ä¸€ä¸ª partial å‡½æ•°å¯ä»¥åšåˆ°å±€éƒ¨åº”ç”¨</span>
<span class="hl-keyword">const</span> addOne = <span class="hl-title function_">partial</span>(add, <span class="hl-number">1</span>);

<span class="hl-title function_">addOne</span>(<span class="hl-number">2</span>); <span class="hl-comment">// 3</span>
</code></pre>
<blockquote>
<p>å’Œå‡½æ•°æŸ¯é‡ŒåŒ–çš„åŒºåˆ«</p>
</blockquote>
<ol>
<li>æŸ¯é‡ŒåŒ–æ˜¯å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢æˆå¤šä¸ªå•å‚æ•°å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª n å…ƒå‡½æ•°è½¬æ¢æˆ n ä¸ªä¸€å…ƒå‡½æ•°</li>
<li>åå‡½æ•°åˆ™æ˜¯å›ºå®šä¸€ä¸ªå‡½æ•°çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª n å…ƒå‡½æ•°è½¬æ¢æˆä¸€ä¸ª n-x å…ƒå‡½æ•°</li>
</ol>
<ul>
<li>æŸ¯é‡ŒåŒ–å’Œåå‡½æ•°çš„å…³ç³»ï¼š<strong>æŸ¯é‡ŒåŒ–é€šè¿‡åå‡½æ•°æ¥å®ç°</strong></li>
</ul>
<blockquote>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>bind</code>å‡½æ•°æ¥å®ç°åå‡½æ•°</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> <span class="hl-title function_">test</span>(<span class="hl-params">a: <span class="hl-built_in">number</span>, b: <span class="hl-built_in">number</span>, c: <span class="hl-built_in">number</span></span>) {
  <span class="hl-keyword">return</span> a + b + c;
}

<span class="hl-keyword">let</span> bindOne = test.<span class="hl-title function_">bind</span>(<span class="hl-literal">null</span>, <span class="hl-number">1</span>);
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(<span class="hl-title function_">bindOne</span>(<span class="hl-number">2</span>, <span class="hl-number">3</span>));
</code></pre>
<ul>
<li>ä½†æ˜¯è¿™ä¼šç›´æ¥æ”¹å˜ this çš„æŒ‡å‘</li>
</ul>
<blockquote>
<p>æ‰‹åŠ¨å®ç°</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> <span class="hl-title function_">partical</span>(<span class="hl-params">fn: <span class="hl-built_in">Function</span>, ...args: <span class="hl-built_in">any</span>[]</span>): <span class="hl-title class_">Function</span> {
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">...moreArgs: <span class="hl-built_in">any</span>[]</span>) {
    <span class="hl-keyword">return</span> <span class="hl-title function_">fn</span>(...args, ...moreArgs);
  };
}
</code></pre>
<h2 id="æƒ°æ€§å‡½æ•°">æƒ°æ€§å‡½æ•°<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#æƒ°æ€§å‡½æ•°"></a></h2>
<blockquote>
<p>æƒ°æ€§å‡½æ•°å°±æ˜¯è¯´å‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œä¹‹åè°ƒç”¨å‡½æ•°éƒ½æ˜¯ç›¸åŒçš„ä½œç”¨ï¼Œç›´æ¥è¿”å›ç¬¬ä¸€æ¬¡æ‰§è¡Œå‡½æ•°ã€‚å¾ˆå¤šæ—¶å€™åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åæ¯æ¬¡è°ƒç”¨å‡½æ•°æ‰§è¡Œçš„ç»“æœéƒ½ä¸€æ ·ã€‚æ‰€ä»¥å¦‚æœå‡½æ•°è¯­å¥ä¸å¿…æ¯æ¬¡æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç§°ä¹‹ä¸ºæƒ°æ€§å‡½æ•°çš„æŠ€å·§æ¥è¿›è¡Œä¼˜åŒ–ã€‚</p>
</blockquote>
<ul>
<li>å¦‚æœæˆ‘ä»¬ç°åœ¨éœ€è¦å†™ä¸€ä¸ª foo å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›é¦–æ¬¡è°ƒç”¨æ—¶çš„ Date
å¯¹è±¡ï¼Œæ³¨æ„æ˜¯é¦–æ¬¡</li>
</ul>
<ol>
<li>
<p>é—­åŒ…çš„å†™æ³•</p>
<pre><code class="hl language-ts"><span class="hl-keyword">let</span> <span class="hl-attr">foo</span>: <span class="hl-function">() =></span> <span class="hl-title class_">Function</span> = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  <span class="hl-keyword">let</span> <span class="hl-attr">time</span>: <span class="hl-title class_">Date</span> = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>();
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
    <span class="hl-keyword">if</span> (time) time;
    <span class="hl-keyword">return</span> time;
  };
};
</code></pre>
</li>
<li>
<p>æƒ°æ€§å‡½æ•°ï¼šæƒ°æ€§å‡½æ•°å°±æ˜¯è§£å†³æ¯æ¬¡éƒ½è¦è¿›è¡Œåˆ¤æ–­çš„è¿™ä¸ªé—®é¢˜ï¼Œè§£å†³åŸç†å¾ˆç®€å•ï¼Œé‡å†™å‡½æ•°</p>
<pre><code class="hl language-ts"><span class="hl-keyword">let</span> <span class="hl-attr">foo</span>: <span class="hl-function">() =></span> <span class="hl-title class_">Function</span> | <span class="hl-title class_">Date</span> = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  <span class="hl-keyword">let</span> <span class="hl-attr">time</span>: <span class="hl-title class_">Date</span> = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>();
  foo = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
    <span class="hl-keyword">return</span> time;
  };
  <span class="hl-keyword">return</span> <span class="hl-title function_">foo</span>();
};
</code></pre>
</li>
</ol>
<h3 id="æƒ°æ€§æ±‚å€¼-lazy-evaluation">æƒ°æ€§æ±‚å€¼ (Lazy evaluation)<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#æƒ°æ€§æ±‚å€¼-lazy-evaluation"></a></h3>
<blockquote>
<p>æŒ‰éœ€æ±‚å€¼æœºåˆ¶ï¼Œåªæœ‰å½“éœ€è¦è®¡ç®—æ‰€å¾—å€¼æ—¶æ‰ä¼šè®¡ç®—</p>
</blockquote>
<ul>
<li>åˆ©ç”¨ç”Ÿæˆå™¨æœºåˆ¶å¯ä»¥å¾ˆå®¹æ˜“å†™å‡º</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> rand = <span class="hl-keyword">function</span>* () {
  <span class="hl-keyword">while</span> (<span class="hl-literal">true</span>) {
    <span class="hl-keyword">yield</span> <span class="hl-title class_">Math</span>.<span class="hl-title function_">random</span>();
  }
};

<span class="hl-keyword">const</span> randIter = <span class="hl-title function_">rand</span>();
randIter.<span class="hl-title function_">next</span>();
</code></pre>
<h2 id="çº¯å‡½æ•°-purity">çº¯å‡½æ•° (Purity)<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#çº¯å‡½æ•°-purity"></a></h2>
<ol>
<li>åº”å§‹ç»ˆè¿”å›ç›¸åŒçš„å€¼ã€‚ä¸ç®¡è°ƒç”¨è¯¥å‡½æ•°å¤šå°‘æ¬¡ï¼Œæˆ–è€…ä»€ä¹ˆæ—¶å€™è°ƒç”¨éƒ½æ˜¯ä¸€æ ·çš„</li>
<li>è‡ªåŒ…å« (ä¸åŒ…å«å…¨å±€å˜é‡)</li>
<li>ä¸åº”ä¿®æ”¹ç¨‹åºçš„çŠ¶æ€æˆ–å¼•èµ·å‰¯ä½œç”¨ (ä¿®æ”¹å…¨å±€å˜é‡)</li>
</ol>
<pre><code class="hl language-ts"><span class="hl-comment">//çº¯å‡½æ•°</span>
<span class="hl-keyword">const</span> <span class="hl-title function_">greet</span> = (<span class="hl-params">name: <span class="hl-built_in">string</span></span>) => <span class="hl-string">`hello, <span class="hl-subst">${name}</span>`</span>;
<span class="hl-title function_">greet</span>(<span class="hl-string">"world"</span>);

<span class="hl-comment">//ä¸æ˜¯çº¯å‡½æ•°ï¼Œä¿®æ”¹äº†å¤–éƒ¨çš„çŠ¶æ€</span>
<span class="hl-keyword">let</span> <span class="hl-attr">greeting</span>: <span class="hl-built_in">string</span>;
<span class="hl-keyword">const</span> <span class="hl-title function_">greet</span> = (<span class="hl-params">name: <span class="hl-built_in">string</span></span>) => {
  greeting = <span class="hl-string">`hello, <span class="hl-subst">${name}</span>`</span>;
};
<span class="hl-title function_">greet</span>(<span class="hl-string">"world"</span>);
</code></pre>
<blockquote>
<p>å‰¯ä½œç”¨ (Side effects):å¦‚æœå‡½æ•°ä¸å¤–éƒ¨å¯å˜çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œåˆ™å®ƒå°±æ˜¯å…·æœ‰å‰¯ä½œç”¨çš„</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-comment">//Date å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„å…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°</span>
<span class="hl-keyword">const</span> differentEveryTime = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>();
</code></pre>
<h2 id="å¹‚ç­‰æ€§">å¹‚ç­‰æ€§<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#å¹‚ç­‰æ€§"></a></h2>
<blockquote>
<p>å¹‚ç­‰æ€§å’Œçº¯å‡½æ•°è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼Œç”šè‡³è¯´å¯ä»¥è¯´æ˜¯æ¯«æ— æ— å…³ç³»</p>
</blockquote>
<ol>
<li>å¹‚ç­‰æ€§å‡½æ•°å¯ä»¥å…·æœ‰å‰¯ä½œç”¨</li>
<li>å‡½æ•°æ‰§è¡Œå¤šæ¬¡è¿”å›ç›¸åŒçš„ç»“æœ (<code>f(f(x))=f(x)</code>),åˆ™æ­¤å‡½æ•°å…·æœ‰å¹‚ç­‰æ€§</li>
</ol>
<pre><code class="hl language-ts"><span class="hl-title class_">Math</span>.<span class="hl-title function_">abs</span>(<span class="hl-title class_">Math</span>.<span class="hl-title function_">abs</span>(-<span class="hl-number">10</span>));
</code></pre>
<h2 id="å‡½æ•°ç»„åˆ-function-composing">å‡½æ•°ç»„åˆ (Function Composing)<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#å‡½æ•°ç»„åˆ-function-composing"></a></h2>
<blockquote>
<p>æ¥æ”¶å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»å³åˆ°å·¦ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ä¸ºä»¥ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> compose =
  (<span class="hl-attr">f</span>: <span class="hl-title class_">Function</span>, <span class="hl-attr">g</span>: <span class="hl-title class_">Function</span>): <span class="hl-function"><span class="hl-params">Function</span> =></span> (<span class="hl-attr">a</span>: <span class="hl-title class_">Function</span>): <span class="hl-function"><span class="hl-params">Function</span> =></span> <span class="hl-title function_">f</span>(<span class="hl-title function_">g</span>(a));
</code></pre>
<ul>
<li>åšä¸€ä¸ªåè½¬å‡½æ•°ï¼Œå¹¶ä¸”è·å–ç¬¬ä¸€ä¸ªç´¢å¼•çš„ä¾‹å­</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-comment">//ä¸èƒ½ç¡®å®šè¿”å›ç´¢å¼•çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹ï¼Œè¿™é‡Œå°±ç”¨ any äº†</span>
<span class="hl-keyword">function</span> first&#x3C;T>(<span class="hl-attr">arr</span>: T[]): <span class="hl-built_in">any</span> {
  <span class="hl-keyword">return</span> arr[<span class="hl-number">0</span>];
}
<span class="hl-keyword">function</span> reverse&#x3C;T>(<span class="hl-attr">arr</span>: T[]): T[] {
  <span class="hl-keyword">return</span> arr.<span class="hl-title function_">reverse</span>();
}
<span class="hl-keyword">let</span> last = <span class="hl-title function_">compose</span>(first, reverse);
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(<span class="hl-title function_">last</span>([<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>, <span class="hl-number">4</span>, <span class="hl-number">5</span>]));
</code></pre>
<blockquote>
<p>å½“ç„¶ redux ç»™å‡ºäº†ä¸€ä¸ªæ›´å¥½çš„å®ç° (å°†å‡½æ•°çš„ä¸ªæ•°æƒ…å†µä¹Ÿè€ƒè™‘å‘¨å…¨äº†)</p>
</blockquote>
<ul>
<li>å…¶å®è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯åœ¨é—­åŒ…ä¸­å†™æ³›å‹å…¶å®æ˜¯æ²¡æœ‰æ£€æŸ¥çš„æ•ˆæœ</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span> <span class="hl-title function_">compose</span>(<span class="hl-params">...fns: <span class="hl-built_in">Function</span>[]</span>) {
  <span class="hl-keyword">if</span> (fns.<span class="hl-property">length</span> === <span class="hl-number">0</span>) {
    <span class="hl-keyword">return</span> <span class="hl-function">(<span class="hl-params">arg: <span class="hl-built_in">Function</span></span>) =></span> arg;
  }
  <span class="hl-keyword">if</span> (fns.<span class="hl-property">length</span> === <span class="hl-number">1</span>) {
    <span class="hl-keyword">return</span> fns[<span class="hl-number">0</span>];
  }
  <span class="hl-keyword">return</span> fns.<span class="hl-title function_">reduce</span>(
    <span class="hl-function">(<span class="hl-params">a, b</span>) =></span>
    <span class="hl-comment">//Writing a type here won't do any good</span>
    &#x3C;T>(...<span class="hl-attr">args</span>: T[]): <span class="hl-function"><span class="hl-params">Function</span> =></span> <span class="hl-title function_">a</span>(<span class="hl-title function_">b</span>(...args)),
  );
}
</code></pre>
<h3 id="ç”Ÿæˆå™¨çš„æ–¹å¼">ç”Ÿæˆå™¨çš„æ–¹å¼<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#ç”Ÿæˆå™¨çš„æ–¹å¼"></a></h3>
<blockquote>
<p>å®ç° <code>map</code>
æ˜ å°„å‡½æ•°ï¼Œç”±äºç”Ÿæˆå™¨çš„<code>yield</code>æ¥å—çš„æ˜¯ä¸Šä¸€æ¬¡çš„ç»“æœï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡çš„è¿­ä»£æ•ˆæœæ˜¯æ— æ•ˆçš„</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span>* <span class="hl-title function_">genMap</span>(<span class="hl-attr">iteratee</span>: <span class="hl-title class_">Function</span>): <span class="hl-title class_">Generator</span>&#x3C;<span class="hl-built_in">string</span> | <span class="hl-literal">null</span>, <span class="hl-built_in">any</span>> {
  <span class="hl-keyword">let</span> input = <span class="hl-keyword">yield</span> <span class="hl-literal">null</span>;
  <span class="hl-keyword">while</span> (<span class="hl-literal">true</span>) {
    input = <span class="hl-keyword">yield</span> <span class="hl-title function_">iteratee</span>(input);
  }
}

<span class="hl-keyword">const</span> gen = <span class="hl-title function_">genMap</span>(<span class="hl-function">(<span class="hl-params">x: <span class="hl-built_in">string</span></span>) =></span> x.<span class="hl-title function_">toUpperCase</span>());
<span class="hl-keyword">const</span> arr = [<span class="hl-string">"a"</span>, <span class="hl-string">"b"</span>, <span class="hl-string">"c"</span>];
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(gen.<span class="hl-title function_">next</span>());
<span class="hl-keyword">for</span> (<span class="hl-keyword">let</span> i <span class="hl-keyword">of</span> arr) {
  <span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(gen.<span class="hl-title function_">next</span>(i));
}
</code></pre>
<ul>
<li>è¿™ç§æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡æ˜¯æµªè´¹çš„</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span>* <span class="hl-title function_">genMap</span>(
  <span class="hl-attr">iterable</span>: <span class="hl-title class_">Iterable</span>&#x3C;<span class="hl-built_in">any</span>>,
  <span class="hl-attr">iteratee</span>: <span class="hl-title class_">Function</span>,
): <span class="hl-title class_">Generator</span>&#x3C;<span class="hl-built_in">string</span> | <span class="hl-literal">null</span>, <span class="hl-built_in">any</span>> {
  <span class="hl-keyword">for</span> (<span class="hl-keyword">let</span> i <span class="hl-keyword">of</span> iterable) {
    <span class="hl-keyword">yield</span> <span class="hl-title function_">iteratee</span>(i);
  }
}
<span class="hl-keyword">const</span> gen = <span class="hl-title function_">genMap</span>([<span class="hl-string">"a"</span>, <span class="hl-string">"b"</span>, <span class="hl-string">"c"</span>], <span class="hl-function">(<span class="hl-params">x: <span class="hl-built_in">string</span></span>) =></span> x.<span class="hl-title function_">toUpperCase</span>());
</code></pre>
<blockquote>
<p>ä½¿ç”¨ <code>yield*</code> æ¥è°ƒç”¨å¦ä¸€ä¸ªç”Ÿæˆå™¨çš„æ–¹å¼æ¥è¿›è¡Œå‡½æ•°ç»„åˆï¼Œ
<code>iterable</code>ä¼šä¸åœçš„å åŠ ä½œç”¨åŸŸ</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">function</span>* <span class="hl-title function_">genCompose</span>(
  <span class="hl-attr">iterable</span>: <span class="hl-title class_">Iterable</span>&#x3C;<span class="hl-built_in">any</span>>,
  ...<span class="hl-attr">fns</span>: <span class="hl-title class_">Function</span>[]
): <span class="hl-title class_">Generator</span>&#x3C;<span class="hl-built_in">any</span>, <span class="hl-built_in">any</span>, <span class="hl-built_in">any</span>> {
  <span class="hl-keyword">for</span> (<span class="hl-keyword">let</span> fn <span class="hl-keyword">of</span> fns) {
    iterable = <span class="hl-title function_">genMap</span>(iterable, fn);
  }
  <span class="hl-keyword">yield</span>* iterable;
}

<span class="hl-keyword">const</span> composed = <span class="hl-title function_">genCompose</span>(
  [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
  <span class="hl-function">(<span class="hl-params">x: <span class="hl-built_in">number</span></span>) =></span> x + <span class="hl-number">1</span>,
  <span class="hl-function">(<span class="hl-params">x: <span class="hl-built_in">number</span></span>) =></span> x * x,
  <span class="hl-function">(<span class="hl-params">x: <span class="hl-built_in">number</span></span>) =></span> x - <span class="hl-number">2</span>,
);
</code></pre>
<h3 id="pointfree"><a href="https://www.ruanyifeng.com/blog/2017/03/pointfree.html">Pointfree</a><a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#pointfree"></a></h3>
<blockquote>
<p>è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç­”æ¡ˆï¼Œåˆ©ç”¨å‡½æ•°ç»„åˆå’ŒæŸ¯é‡ŒåŒ–å¯ä»¥è¾¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„å‡½æ•°å¼æ•ˆæœ</p>
</blockquote>
<ul>
<li><a href="https://ramdajs.com/">ramda</a>ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ”¯æŒæŸ¯é‡ŒåŒ–</li>
<li>é˜®è€å¸ˆçš„æ•™ç¨‹:<a href="https://www.ruanyifeng.com/blog/2017/03/ramda.html">https://www.ruanyifeng.com/blog/2017/03/ramda.html</a></li>
</ul>
<pre><code class="hl language-js"><span class="hl-comment">//ramda</span>
fn = R.<span class="hl-title function_">pipe</span>(f1, f2, f3);
</code></pre>
<ul>
<li>å®šä¹‰<code>f1</code>,<code>f2</code>,<code>f3</code>å¯ä»¥æ¨ç®—å‡º<code>fn</code>.æ•´ä¸ªè¿‡ç¨‹ä¸­ã€‚æ ¹æœ¬ä¸éœ€è¦çŸ¥åˆ°å…¶ä¸­çš„å‚æ•°å˜åŒ–</li>
<li>æ¢ä¸€ç§å½“æ—¶å¯ä»¥ç†è§£ä¸ºï¼Œåªéœ€è¦å°†ä¸€äº›ç®€å•çš„æ­¥éª¤åˆæˆåˆ°ä¸€èµ·ï¼Œå®šä¹‰æˆä¸€ç§å‚æ•°æ— å…³çš„åˆæˆè¿ç®—</li>
<li>è¿™ç§é£æ ¼å°±æ˜¯<code>Pointfree</code>.ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ª<code>Pointfree</code></li>
</ul>
<blockquote>
<p><code>Pointfree</code>çš„æœ¬è´¨å°±æ˜¯ä½¿ç”¨ä¸€äº›é€šç”¨çš„å‡½æ•°ï¼Œç»„åˆé™¤å„ç§å¤æ‚çš„è¿ç®—.shang å±‚è¿ç®—ä¸ç›´æ¥æ“ä½œæ•°æ®</p>
</blockquote>
<pre><code class="hl language-ts"><span class="hl-keyword">interface</span> <span class="hl-title class_">Iperson</span> {
  <span class="hl-attr">name</span>: <span class="hl-built_in">string</span>;
  <span class="hl-attr">role</span>: <span class="hl-built_in">string</span>;
}

<span class="hl-keyword">const</span> <span class="hl-attr">data</span>: <span class="hl-title class_">Iperson</span>[] = [
  { <span class="hl-attr">name</span>: <span class="hl-string">"å¼ ä¸‰"</span>, <span class="hl-attr">role</span>: <span class="hl-string">"worker"</span> },
  { <span class="hl-attr">name</span>: <span class="hl-string">"æå››"</span>, <span class="hl-attr">role</span>: <span class="hl-string">"worker"</span> },
  { <span class="hl-attr">name</span>: <span class="hl-string">"ç‹äº”"</span>, <span class="hl-attr">role</span>: <span class="hl-string">"manager"</span> },
];

<span class="hl-keyword">type</span> <span class="hl-title class_">Iper</span> = keyof <span class="hl-title class_">Iperson</span>;

<span class="hl-keyword">const</span> <span class="hl-title function_">isWorker</span> = (<span class="hl-params">s: <span class="hl-built_in">string</span></span>) => s === <span class="hl-string">"worker"</span>;
<span class="hl-comment">//å®šä¹‰æŸ¥æ‰¾è§’è‰²çš„å‡½æ•°ï¼Œåœ¨è¿™é‡ŒåµŒå¥—ä¼šå¢åŠ è€¦åˆ</span>
<span class="hl-keyword">const</span> <span class="hl-title function_">prop</span> = (<span class="hl-params">p: Iper, obj: Iperson</span>) => <span class="hl-title function_">isWorker</span>(obj[p]);
<span class="hl-comment">//æŒ‡å®šè¯»å– role çš„å€¼</span>
<span class="hl-keyword">const</span> propRole = <span class="hl-title function_">curry</span>(prop)(<span class="hl-string">"role"</span>);

data.<span class="hl-title function_">filter</span>(propRole);
</code></pre>
<ul>
<li>å¦‚æœä¸é€‚ç”¨<code>compose Function</code>ä¼šå¤§å¤§å¢åŠ å‡½æ•°çš„è€¦åˆåº¦ã€‚è¿™å°±å¯ä»¥ä½¿ç”¨å‡½æ•°ç»„åˆçš„æ€æƒ³é™ä½è€¦åˆï¼Œé¿å…æ´‹è‘±æ¨¡å‹</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> <span class="hl-title function_">prop</span> = (<span class="hl-params">p: Iper, obj: Iperson</span>) => obj[p];
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(
  data.<span class="hl-title function_">filter</span>(<span class="hl-function">(<span class="hl-params">_, index</span>) =></span> <span class="hl-title function_">compose</span>(isWorker, propRole)(data[index])),
);
</code></pre>
<h2 id="å‡½æ•°è®°å¿†">å‡½æ•°è®°å¿†<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#å‡½æ•°è®°å¿†"></a></h2>
<blockquote>
<p>åªè¦æŠŠå‚æ•°å’Œå¯¹åº”çš„ç»“æœæ•°æ®å­˜åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè°ƒç”¨æ—¶ï¼Œåˆ¤æ–­å‚æ•°å¯¹åº”çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±è¿”å›å¯¹åº”çš„å€¼</p>
</blockquote>
<ul>
<li>å¦‚æœéœ€è¦å¤§é‡é‡å¤çš„è®¡ç®—åˆä¾èµ–äºä¹‹å‰çš„è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘å‡½æ•°è®°å¿†</li>
<li>åˆ©ç”¨ Map,Set æˆ–è€…æ˜¯æ•°ç»„åšå­—å…¸éƒ½æ˜¯ä¸€ç§å‡½æ•°è®°å¿†</li>
<li>è°¨æ…ä½¿ç”¨ï¼Œæ¶ˆè€—æ€§å¾ˆå¤§</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> memoize = <span class="hl-keyword">function</span> (<span class="hl-params">fn: <span class="hl-built_in">Function</span>, hasher?: <span class="hl-built_in">Function</span></span>) {
  <span class="hl-keyword">let</span> <span class="hl-attr">cache</span>: <span class="hl-built_in">any</span> = {};
  <span class="hl-keyword">const</span> menoize = <span class="hl-keyword">function</span> (<span class="hl-params">...args: <span class="hl-built_in">any</span>[]</span>) {
    <span class="hl-keyword">const</span> address = <span class="hl-string">""</span> + (hasher ? hasher.<span class="hl-title function_">apply</span>(<span class="hl-literal">null</span>, args) : args);
    <span class="hl-keyword">if</span> (!cache[address]) {
      cache[address] = fn.<span class="hl-title function_">apply</span>(<span class="hl-literal">null</span>, args);
    }
    <span class="hl-keyword">return</span> cache[address];
  };
  <span class="hl-keyword">return</span> menoize;
};
</code></pre>
<blockquote>
<p>å½“ç„¶ï¼ŒæŠ„è¢­<code>underscore</code>çš„ä½¿ç”¨ ts é‡å¤Ÿäº†ä¸€ä¸‹å¾ˆå¿«</p>
</blockquote>
<ul>
<li>å½“æ²¡æœ‰ hansher(ä½œä¸ºé”®çš„å‡½æ•°æ—¶),ä¼šè®© args ä½œä¸ºé”®</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">let</span> add = <span class="hl-keyword">function</span> (<span class="hl-params">a: <span class="hl-built_in">number</span>, b: <span class="hl-built_in">number</span>, c: <span class="hl-built_in">number</span></span>) {
  <span class="hl-keyword">return</span> a + b + c;
};
<span class="hl-keyword">let</span> memoizedAdd = <span class="hl-title function_">memoize</span>(add);
<span class="hl-variable language_">console</span>.<span class="hl-title function_">log</span>(<span class="hl-title function_">memoizedAdd</span>(<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>));
</code></pre>
<blockquote>
<p>æµ‹è¯•ä¸€ä¸‹æ˜¯ï¼Œæ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¦‚æœæƒ³è¦ä½¿ç”¨ä¸€ä¸ªç”Ÿæˆé”®çš„å‡½æ•°<code>hasher</code></p>
</blockquote>
<ul>
<li>å¦‚æœå¹¶ä¸æƒ³è¦æ•°ç»„çš„å…¨éƒ¨å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ slice æˆªå–æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªä½œä¸ºé”®</li>
<li>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„å‡½æ•°ä½œä¸ºé”®</li>
</ul>
<pre><code class="hl language-ts"><span class="hl-keyword">const</span> memoizedAdd = <span class="hl-title function_">memoize</span>(add, <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  <span class="hl-keyword">const</span> args = <span class="hl-title class_">Array</span>.<span class="hl-property"><span class="hl-keyword">prototype</span></span>.<span class="hl-property">slice</span>.<span class="hl-title function_">call</span>(<span class="hl-variable language_">arguments</span>, <span class="hl-number">0</span>, <span class="hl-number">1</span>);
  <span class="hl-keyword">return</span> <span class="hl-title class_">JSON</span>.<span class="hl-title function_">stringify</span>(args);
});
</code></pre>
        </article></main><script src="https://giscus.app/client.js"
        data-repo="fwqaaq/fwqaaq.github.io"
        data-repo-id="R_kgDOHCFK2A"
        data-category="Show and tell"
        data-category-id="DIC_kwDOHCFK2M4CYOLh"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async></script>