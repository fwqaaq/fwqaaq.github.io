<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="rgb(46, 44, 79)">
  <meta name="description" content="é˜²æŠ–å’ŒèŠ‚æµ">
  <meta name="keywords" content="JavaScript">
  <title>
    é˜²æŠ–èŠ‚æµ
  </title>
  <link rel="stylesheet" href="/public/css/index.css">
  <link rel="stylesheet" href="/public/css/markdown.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <script src="/public/JavaScript/index.js"></script>
</head><header class="blog-header">
  <a href="https://github.com/fwqaaq" target="_blank">
    <img src="https://avatars.githubusercontent.com/u/82551626?v=4" loading="lazy" alt="me" srcset="">
  </a>
  <nav class="header-nav">
    <a class="decoration-line" href="/"><i class="fa-solid fa-house-chimney fa-xs"></i>
      <span class="disappear">Home</span>
    </a>
    <a class="decoration-line" href="/./about/index.html"><i class="fa-solid fa-address-card fa-xs"></i>
      <span class="disappear">About</span></a>
    <a class="decoration-line" href="/./archive/index.html"><i class="fa-solid fa-box-archive fa-xs"></i> <span
        class="disappear">Archive</span></a>
    <a class="decoration-line" href="/./tags/index.html"><i class="fa-solid fa-tag fa-xs"></i> <span
        class="disappear">Tag</span></a>
    <div class="toy"><i class="fa-solid fa-gamepad fa-xs"></i> <span class="disappear">Toy</span>
      <nav class="toy-nav disappear">
        <a class="decoration-line" href="/public/resume/">æˆ‘çš„ç®€å†</a>
        <a class="decoration-line" href="/public/write-css/index.html">å­¦ä¹  UI</a>
      </nav>
    </div>
    <a class="decoration-line" href="/feed.xml"><i class="fa-solid fa-rss fa-xs"></i> <span
        class="disappear">RSS</span></a>
    <a class="decoration-line model" href="#" class="model"><i class="fa-solid fa-sun fa-xs"></i></a>
  </nav>
</header><main class="blog-main">
          <article class="blog-article">
            <h1>é˜²æŠ–èŠ‚æµ</h1>
            <hr>
            <h2 id="åœºæ™¯">åœºæ™¯<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#åœºæ™¯"></a></h2>
<pre><code class="hl language-html"><span class="hl-meta">&#x3C;!DOCTYPE <span class="hl-keyword">html</span>></span>
<span class="hl-tag">&#x3C;<span class="hl-name">html</span> <span class="hl-attr">lang</span>=<span class="hl-string">"en"</span>></span>

<span class="hl-tag">&#x3C;<span class="hl-name">head</span>></span>
  <span class="hl-tag">&#x3C;<span class="hl-name">title</span>></span>Document<span class="hl-tag">&#x3C;/<span class="hl-name">title</span>></span>
  <span class="hl-tag">&#x3C;<span class="hl-name">style</span>></span><span class="css">
    <span class="hl-selector-id">#container</span> {
      <span class="hl-attribute">width</span>: <span class="hl-number">100%</span>;
      <span class="hl-attribute">height</span>: <span class="hl-number">200px</span>;
      <span class="hl-attribute">line-height</span>: <span class="hl-number">200px</span>;
      <span class="hl-attribute">text-align</span>: center;
      <span class="hl-attribute">color</span>: <span class="hl-number">#fff</span>;
      <span class="hl-attribute">background-color</span>: <span class="hl-number">#444</span>;
    }
  </span><span class="hl-tag">&#x3C;/<span class="hl-name">style</span>></span>
<span class="hl-tag">&#x3C;/<span class="hl-name">head</span>></span>

<span class="hl-tag">&#x3C;<span class="hl-name">body</span>></span>
  <span class="hl-tag">&#x3C;<span class="hl-name">div</span> <span class="hl-attr">id</span>=<span class="hl-string">"container"</span>></span><span class="hl-tag">&#x3C;/<span class="hl-name">div</span>></span>
  <span class="hl-tag">&#x3C;<span class="hl-name">script</span>></span><span class="javascript">
    <span class="hl-keyword">let</span> count = <span class="hl-number">0</span>
    <span class="hl-keyword">let</span> divContainer = <span class="hl-variable language_">document</span>.<span class="hl-title function_">getElementById</span>(<span class="hl-string">"container"</span>)
    <span class="hl-keyword">function</span> <span class="hl-title function_">getUserAction</span>(<span class="hl-params"></span>) {
      divContainer.<span class="hl-property">innerHTML</span> = count++
    }
    divContainer.<span class="hl-property">onmousemove</span> = getUserAction
  </span><span class="hl-tag">&#x3C;/<span class="hl-name">script</span>></span>
<span class="hl-tag">&#x3C;/<span class="hl-name">body</span>></span>

<span class="hl-tag">&#x3C;/<span class="hl-name">html</span>></span>
</code></pre>
<div class="markdown-alert markdown-alert-tip">
<p class="markdown-alert-title"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p>
<p>å½“é¼ æ ‡ä¸€æ”¾åˆ°çŸ©å½¢æ¡†ä¸­ï¼Œå°±ä¼šä¸åœçš„è§¦å‘äº‹ä»¶ (å¦‚æœæ˜¯å¤æ‚çš„å›è°ƒæˆ–è€… ajax çš„è¯·æ±‚å°±ä¼šå¾ˆé¢‘ç¹çš„è§¦å‘äº‹ä»¶)</p>
<p>æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šé˜²æŠ–å’ŒèŠ‚æµ</p>
</div>
<h2 id="é˜²æŠ–">é˜²æŠ–<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#é˜²æŠ–"></a></h2>
<blockquote>
<p>é˜²æŠ–çš„åŸç†å°±æ˜¯ï¼šå°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘åªè§¦å‘æœ€åä¸€æ¬¡äº‹ä»¶ï¼Œä¸” n ç§’å†…ä¸å†è§¦å‘ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰ä½ è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶</p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">debounce</span>(<span class="hl-params">func, wait</span>) {
  <span class="hl-keyword">let</span> timeout;
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
    <span class="hl-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hl-built_in">setTimeout</span>(<span class="hl-function">() =></span> {
      <span class="hl-title function_">func</span>();
    }, wait);
  };
}
divContainer.<span class="hl-property">onmousemove</span> = <span class="hl-title function_">debounce</span>(getUserAction, <span class="hl-number">1000</span>);
</code></pre>
<ul>
<li>æ³¨æ„ï¼š
<ol>
<li>setTimeout ä¸­å»ºè®®ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä¼šæŒ‡å‘å‡½æ•°å¤–çš„ this(è¿™ä¸ª this å°±æ˜¯è°ƒç”¨è¿™ä¸ªäº‹ä»¶çš„ id ä¸º container çš„ div)</li>
<li>å¦‚æœä½¿ç”¨æ™®é€šçš„å‡½æ•°ï¼Œä¼šæŒ‡å‘ setTimeout å†…éƒ¨è®¾å®šå¥½çš„ thisï¼Œå³ window</li>
<li>timeout åœ¨å¤–éƒ¨åˆå§‹åŒ–ï¼Œ<code>clearTimeout</code>ä¼šæ¸…ç†ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</li>
</ol>
</li>
</ul>
<blockquote>
<p>å¦‚æœä¸ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå°±å¾—è€ƒè™‘ this ç»‘å®šé—®é¢˜ï¼Œè¿˜æœ‰äº‹ä»¶å¯¹è±¡<code>event</code></p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">debounce</span>(<span class="hl-params">func, wait</span>) {
  <span class="hl-keyword">let</span> timeout;
  <span class="hl-keyword">let</span> _self = <span class="hl-variable language_">this</span>;
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">e</span>) {
    <span class="hl-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hl-built_in">setTimeout</span>(<span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
      <span class="hl-title class_">Reflect</span>.<span class="hl-title function_">apply</span>(func, _self, e);
    }, wait);
  };
}
</code></pre>
<h3 id="ç«‹å³æ‰§è¡Œ">ç«‹å³æ‰§è¡Œ<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#ç«‹å³æ‰§è¡Œ"></a></h3>
<blockquote>
<p>å¦‚æœå¸Œæœ›äº‹ä»¶æ¯æ¬¡é‡æ–°ç‚¹å‡»éƒ½ä¼šç«‹åˆ»æ‰§è¡Œï¼Œç„¶åç­‰åˆ°åœæ­¢è§¦å‘ n ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘ã€‚è€Œä¸æ˜¯éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œ</p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">debounce</span>(<span class="hl-params">func, wait, immediate</span>) {
  <span class="hl-keyword">let</span> timeout;
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">e</span>) {
    <span class="hl-comment">//timeout ä¸º false æ‰ä¼šç«‹å³æ‰§è¡Œ</span>
    <span class="hl-keyword">let</span> hasImmediate = !timeout &#x26;&#x26; immediate;
    <span class="hl-keyword">if</span> (timeout) <span class="hl-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hl-built_in">setTimeout</span>(<span class="hl-function">() =></span> {
      <span class="hl-comment">//æ‰§è¡Œå®Œå®šæ—¶å™¨ä¹‹åä¹Ÿä¼šç«‹å³æ‰§è¡Œ</span>
      timeout = <span class="hl-literal">null</span>;
    }, wait);
    <span class="hl-keyword">if</span> (hasImmediate) {
      <span class="hl-title function_">func</span>(e);
    }
  };
}
</code></pre>
<ul>
<li>ä¸¤ç§ç«‹å³æ‰§è¡Œçš„æƒ…å†µ
<ol>
<li>å½“å¼€å§‹æ»‘åŠ¨æ—¶ï¼Œå†æ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶ä¼šç«‹å³æ‰§è¡Œ</li>
<li>setTimeout æ˜¯å®ä»»åŠ¡ï¼Œåˆå§‹åŒ–ä¹‹åä¼šæ”¾åˆ°é˜Ÿåˆ—ä¸­ã€‚</li>
<li>å½“å®šæ—¶å™¨æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå†æ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶ä¼šç«‹å³æ‰§è¡Œ</li>
<li>é™¤äº†å®šæ—¶å™¨ä¹‹å¤–çš„ä¾ç„¶ä¼šæŒ‰ç…§äº‹ä»¶çš„é¢‘ç‡è§¦å‘</li>
</ol>
</li>
</ul>
<h3 id="å–æ¶ˆ">å–æ¶ˆ<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#å–æ¶ˆ"></a></h3>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">debounce</span>(<span class="hl-params">func, wait, immediate</span>) {
  <span class="hl-keyword">let</span> timeout;
  <span class="hl-keyword">function</span> <span class="hl-title function_">debounced</span>(<span class="hl-params">e</span>) {
    <span class="hl-keyword">let</span> hasImmediate = !timeout &#x26;&#x26; immediate;
    <span class="hl-keyword">if</span> (timeout) <span class="hl-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hl-built_in">setTimeout</span>(<span class="hl-function">() =></span> {
      <span class="hl-keyword">if</span> (timeout) {
        <span class="hl-title function_">func</span>(e);
      }
      timeout = <span class="hl-literal">null</span>;
    }, wait);
    <span class="hl-keyword">if</span> (hasImmediate) {
      <span class="hl-title function_">func</span>(e);
    }
  }
  debounced.<span class="hl-property">cancel</span> = <span class="hl-function">() =></span> {
    <span class="hl-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hl-literal">null</span>;
  };
  <span class="hl-keyword">return</span> debounced;
}
</code></pre>
<blockquote>
<p>ä½¿ç”¨ï¼š<code>click</code>äº‹ä»¶ç»‘å®šä¸€ä¸ªç›‘å¬å™¨</p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">let</span> setUserAction = <span class="hl-title function_">debounce</span>(getUserAction, <span class="hl-number">10000</span>, <span class="hl-literal">true</span>);
divContainer.<span class="hl-property">onmousemove</span> = setUserAction;
<span class="hl-variable language_">document</span>.<span class="hl-title function_">getElementById</span>(<span class="hl-string">"btn"</span>).<span class="hl-title function_">addEventListener</span>(<span class="hl-string">"click"</span>, <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  setUserAction.<span class="hl-title function_">cancel</span>();
});
</code></pre>
<ul>
<li>ä¸è¦ç»‘å®š<code>click</code>äº‹ä»¶ï¼Œè¿™æ˜¯æµè§ˆå™¨å¼€æ”¾çš„ä¸€ä¸ªé¼ æ ‡ç‚¹å‡»è‡ªå®šä¹‰æ¥å£</li>
<li>ä¸è¦ä¸<code>onclick</code>äº‹ä»¶ææ··</li>
</ul>
<pre><code class="hl language-js"><span class="hl-variable language_">document</span>.<span class="hl-title function_">getElement</span>(<span class="hl-string">"btn"</span>).<span class="hl-property">onclick</span> = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  setUserAction.<span class="hl-title function_">cancel</span>();
};
</code></pre>
<h2 id="èŠ‚æµ">èŠ‚æµ<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#èŠ‚æµ"></a></h2>
<div class="markdown-alert markdown-alert-tip">
<p class="markdown-alert-title"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p>
<p>æŒç»­è§¦å‘äº‹ä»¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶</p>
</div>
<h3 id="ä½¿ç”¨æ—¶é—´æˆ³">ä½¿ç”¨æ—¶é—´æˆ³<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#ä½¿ç”¨æ—¶é—´æˆ³"></a></h3>
<blockquote>
<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³ (ä¸€å¼€å§‹å€¼ä¸º 0),å¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ã€‚åä¹‹ä¸æ‰§è¡Œ</p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">throttle</span>(<span class="hl-params">func, wait</span>) {
  <span class="hl-keyword">let</span> previous = <span class="hl-number">0</span>;
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">e</span>) {
    <span class="hl-keyword">let</span> now = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>().<span class="hl-title function_">getTime</span>();
    <span class="hl-keyword">if</span> (now - previous > wait) {
      <span class="hl-title function_">func</span>(e);
      previous = now;
    }
  };
}

container.<span class="hl-property">onmousemove</span> = <span class="hl-title function_">throttle</span>(getuserAction, <span class="hl-number">1000</span>);
</code></pre>
<h3 id="ä½¿ç”¨å®šæ—¶å™¨">ä½¿ç”¨å®šæ—¶å™¨<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#ä½¿ç”¨å®šæ—¶å™¨"></a></h3>
<blockquote>
<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œå®Œï¼Œæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨</p>
</blockquote>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">throttle</span>(<span class="hl-params">func, wait</span>) {
  <span class="hl-keyword">let</span> timeout;
  <span class="hl-keyword">return</span> <span class="hl-keyword">function</span> (<span class="hl-params">e</span>) {
    timeout = <span class="hl-built_in">setTimeout</span>(<span class="hl-function">() =></span> {
      <span class="hl-title function_">func</span>(e);
      timeout = <span class="hl-literal">null</span>;
    }, wait);
  };
}
container.<span class="hl-property">onmousemove</span> = <span class="hl-title function_">throttle</span>(getUserAction, <span class="hl-number">1000</span>);
</code></pre>
<ol>
<li>ä½¿ç”¨æ—¶é—´æˆ³äº‹ä»¶ä¼šç«‹åˆ»æ‰§è¡Œï¼Œå¹¶ä¸”åœæ­¢è§¦å‘åä¸ä¼šå†æ‰§è¡Œ</li>
<li>ä½¿ç”¨å®šæ—¶å™¨äº‹ä»¶ä¼šåœ¨ n ç§’åæ‰§è¡Œï¼Œå¹¶ä¸”åœæ­¢è§¦å‘åä¾ç„¶ä¼šåœ¨æ‰§è¡Œä¸€æ¬¡</li>
</ol>
<h3 id="ä¼˜åŒ–">ä¼˜åŒ–<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#ä¼˜åŒ–"></a></h3>
<blockquote>
<p>å¦‚æœé¼ æ ‡ç§»å…¥èƒ½ç«‹åˆ»æ‰§è¡Œï¼Œä¸”åœæ­¢è§¦å‘çš„æ—¶å€™è¿˜èƒ½åœ¨æ‰§è¡Œä¸€æ¬¡</p>
</blockquote>
<ol>
<li>leading:false è¡¨ç¤ºç¦ç”¨ç¬¬ä¸€æ¬¡</li>
<li>trailing:false è¡¨ç¤ºè­¦ç”¨åœæ­¢è§¦å‘</li>
<li>ä¸èƒ½åŒæ—¶è®¾ç½®ä¸º falseï¼ŒåŒæ—¶ä¸º false çš„æ—¶å€™ã€‚é¼ æ ‡ç§»å‡ºè¿‡äº†è®¾ç½®çš„æ—¶é—´ï¼Œåœ¨ç§»å…¥å°±ä¼šç«‹å³æ‰§è¡Œ</li>
</ol>
<pre><code class="hl language-js"><span class="hl-keyword">function</span> <span class="hl-title function_">throttle</span>(<span class="hl-params">func, wait, options</span>) {
  <span class="hl-keyword">let</span> timeout, previous = <span class="hl-number">0</span>;
  <span class="hl-keyword">if</span> (!options) options = {};
  <span class="hl-keyword">let</span> later = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
    privous = options.<span class="hl-property">leading</span> === fasle ? <span class="hl-number">0</span> : <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>().<span class="hl-title function_">getTime</span>();
    <span class="hl-keyword">let</span> previous = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>().<span class="hl-title function_">getTime</span>();
    <span class="hl-title function_">func</span>();
    timeout = <span class="hl-literal">null</span>;
  };
  <span class="hl-keyword">function</span> <span class="hl-title function_">throttled</span>(<span class="hl-params"></span>) {
    <span class="hl-keyword">let</span> now = <span class="hl-keyword">new</span> <span class="hl-title class_">Date</span>().<span class="hl-title function_">getTime</span>();
    <span class="hl-keyword">if</span> (options.<span class="hl-property">leading</span> === <span class="hl-literal">false</span> &#x26;&#x26; !privous) privous = now;
    <span class="hl-keyword">let</span> remaining = wait - (now - previous);
    <span class="hl-keyword">if</span> (remaining &#x3C; <span class="hl-number">0</span> || remaining > wait) {
      <span class="hl-keyword">if</span> (timeout) {
        <span class="hl-built_in">clearTimeout</span>(timeout);
        timeout = <span class="hl-literal">null</span>;
      }
      previous = now;
      <span class="hl-title function_">func</span>();
    } <span class="hl-keyword">else</span> <span class="hl-keyword">if</span> (!timeout &#x26;&#x26; options.<span class="hl-property">trailing</span> === <span class="hl-literal">true</span>) {
      timeout = <span class="hl-built_in">setTimeout</span>(later, remaining);
    }
  }
  <span class="hl-keyword">return</span> throttled;
}
</code></pre>
<ol>
<li>ä¸ºä»€ä¹ˆä¼šæœ‰ <code>!timeout</code>,å½“è§¦å‘çš„æ—¶é—´å°äºç­‰å¾…çš„æ—¶é—´çš„æ—¶å€™ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å› ä¸ºæ˜¯å®šæ—¶å™¨ä¼šåœ¨ä¸€æ®µæ—¶é—´åå†æ‰§è¡Œï¼ˆå¹¶ä¸”ä¸æ–­çš„è§¦å‘å®šæ—¶å™¨éƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œç›´åˆ° <code>remaining&#x3C;=0</code>ï¼‰</li>
<li><code>remaining &#x3C;= 0 || remaining > wait</code>ï¼šå°äºç­‰å¾…æ—¶é—´ï¼Œæˆ–è€…æ—¶é—´è¶…è¿‡äº†ç­‰å¾…æ—¶é—´ï¼ˆprevious åªæœ‰åœ¨ if...å†…éƒ¨ä¼šæ›´æ–°ã€‚ç¬¬ä¸€æ¬¡è§¦å‘ååªæœ‰ now ä¼šä¸åœæ›´æ–°ï¼‰</li>
</ol>
<h3 id="throttled-å–æ¶ˆ">throttled å–æ¶ˆ<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="ğŸ”—" href="#throttled-å–æ¶ˆ"></a></h3>
<pre><code class="hl language-js">throttled.<span class="hl-property">cancel</span> = <span class="hl-keyword">function</span> (<span class="hl-params"></span>) {
  <span class="hl-built_in">clearTimeout</span>(timeout);
  timeout = <span class="hl-literal">null</span>;
  previous = <span class="hl-number">0</span>;
};
</code></pre>
        </article></main><script src="https://giscus.app/client.js"
        data-repo="fwqaaq/fwqaaq.github.io"
        data-repo-id="R_kgDOHCFK2A"
        data-category="Show and tell"
        data-category-id="DIC_kwDOHCFK2M4CYOLh"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async></script>