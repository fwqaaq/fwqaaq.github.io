<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="rgb(46, 44, 79)">
  <meta name="description" content="远程连接">
  <meta name="keywords" content="Config">
  <title>
    远程连接
  </title>
  <link rel="stylesheet" href="/public/css/index.css">
  <link rel="stylesheet" href="/public/css/markdown.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <script src="/public/JavaScript/index.js"></script>
</head><header class="blog-header">
  <a href="https://github.com/fwqaaq" target="_blank">
    <img src="https://avatars.githubusercontent.com/u/82551626?v=4" loading="lazy" alt="me" srcset="">
  </a>
  <nav class="header-nav">
    <a class="decoration-line" href="/"><i class="fa-solid fa-house-chimney fa-xs"></i>
      <span class="disappear">Home</span>
    </a>
    <a class="decoration-line" href="/./about/index.html"><i class="fa-solid fa-address-card fa-xs"></i>
      <span class="disappear">About</span></a>
    <a class="decoration-line" href="/./archive/index.html"><i class="fa-solid fa-box-archive fa-xs"></i> <span
        class="disappear">Archive</span></a>
    <a class="decoration-line" href="/./tags/index.html"><i class="fa-solid fa-tag fa-xs"></i> <span
        class="disappear">Tag</span></a>
    <div class="toy"><i class="fa-solid fa-gamepad fa-xs"></i> <span class="disappear">Toy</span>
      <nav class="toy-nav disappear">
        <a class="decoration-line" href="/public/resume/">我的简历</a>
        <a class="decoration-line" href="/public/write-css/index.html">学习 UI</a>
      </nav>
    </div>
    <a class="decoration-line" href="/feed.xml"><i class="fa-solid fa-rss fa-xs"></i> <span
        class="disappear">RSS</span></a>
    <a class="decoration-line model" href="#" class="model"><i class="fa-solid fa-sun fa-xs"></i></a>
  </nav>
</header><main class="blog-main">
          <article class="blog-article">
            <h1>远程连接</h1>
            <hr>
            <h2 id="ssh-连接">ssh 连接<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#ssh-连接"></a></h2>
<ol>
<li>
<p><code>windows</code> 客户端在应用可选项中下载 <code>Openssh</code> 的客户端 (客户端一般是自带的) 和服务端，使用 <code>ssh -V</code> 查看有没有下载成功</p>
</li>
<li>
<p>在计算机管理的服务中去开启带有 <code>openssh</code> 管理的页面，<code>Get-Service -Name *ssh*</code>，查看运行状态（需要在<code>powershell</code>中查看）</p>
</li>
<li>
<p>查看 ssh 是否连接默认的 22 端口 <code>netstat -an | findstr :22</code></p>
<pre><code class="hl language-shell">PS C:\Users\15531> netstat -an | findstr :22
  TCP    0.0.0.0:22             0.0.0.0:0              LISTENING
  TCP    [::]:22                [::]:0                 LISTENING
</code></pre>
</li>
<li>
<p>打开终端，输入 <code>ipconfig</code>，可以看到无线局域网适配的 WLAN 的地址。然后就可以使用 ssh 连接了</p>
</li>
<li>
<p>连接 ssh 的方法有很多（比如 vscode 的 RemoteSSH）</p>
</li>
</ol>
<h2 id="远程桌面">远程桌面<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#远程桌面"></a></h2>
<blockquote>
<p>使用 windows 远程桌面，需要升级到 windows 专业版</p>
</blockquote>
<ul>
<li>由于 windows 远程桌面是被阉割的，需要去下载<a href="https://github.com/stascorp/rdpwrap/releases">修复工具</a></li>
<li>下载完之后，要以管理员身份运行 <code>install.bat</code></li>
<li>出现 <code>Successfully installed</code> 代表成功</li>
</ul>
<h3 id="局域网">局域网<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#局域网"></a></h3>
<blockquote>
<p>如果同在一个局域网就非常的简单</p>
</blockquote>
<ul>
<li>一定要在同一个局域网下
<ul>
<li>在移动端设备下载 <code>RD Client</code>，输入 windows 的 ip，身份，密码即可</li>
</ul>
</li>
</ul>
<h3 id="frp">frp<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#frp"></a></h3>
<blockquote>
<p>高性能的反向代理应用，对 web 服务支持根据域名进行路由转发行</p>
</blockquote>
<h4 id="服务端配置">服务端配置<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#服务端配置"></a></h4>
<ul>
<li>
<p>在服务器中使用 wget 下载 <a href="https://github.com/fatedier/frp/releases">frp</a></p>
<pre><code class="hl language-shell">wget https://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_linux_amd64.tar.gz
<span class="hl-meta prompt_"># </span><span class="bash">解压</span>
tar -zxvf frp_0.22.0_linux_amd64.tar.gz
<span class="hl-meta prompt_"># </span><span class="bash">就不一一详说了</span>
</code></pre>
</li>
<li>
<p>进入到 frp 目录后，输入以下内容</p>
<ul>
<li>server_add: 服务器公网 ip</li>
<li>token: 可以改复杂一些和后面的客户端配置保持一致即可</li>
</ul>
</li>
</ul>
<pre><code class="hl language-shell">[common] 
 server_addr = xxx.xxx.xxx.xxx  

 bind_port = 7000


 dashboard_port = 7500


 token = 12345678 


 dashboard_user = admin


 dashboard_pwd = admin
</code></pre>
<ul>
<li>运行 <code>./frps -c frps.ini</code>,发现成功没问题</li>
</ul>
<blockquote>
<p>为了保证服务器连接关闭之后，还能继续运行，需要下载 screen（虚拟终端）</p>
</blockquote>
<pre><code class="hl language-shell">dnf install screen
<span class="hl-meta prompt_"># </span><span class="bash">建立起一次会话（frp 是会话的名称）</span>
screen -S frp
<span class="hl-meta prompt_"># </span><span class="bash">到frp目录下</span>
./frps -c frps.ini
</code></pre>
<ul>
<li>产看后台以及进入之前的会话</li>
</ul>
<pre><code class="hl language-shell">screen -ls
<span class="hl-meta prompt_"># </span><span class="bash">757017.frp (Attached)：Attached状态，其实代表此虚拟终端，用户正在使用</span>
<span class="hl-meta prompt_"># </span><span class="bash">756326.frp (Detached)</span>
<span class="hl-meta prompt_">
# </span><span class="bash">如果记住之前的会话的名称，使用此命令进入</span>
screen -r frp
<span class="hl-meta prompt_">
# </span><span class="bash">756326 为 pid，也可以为 name，此命令用于退出 虚拟终端</span>
screen -X -S 756326 quit
</code></pre>
<h4 id="客户端配置">客户端配置<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#客户端配置"></a></h4>
<blockquote>
<p>windows 端需要和服务端配置相同版本的<a href="ttps://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_windows_amd64.zip">frp</a></p>
</blockquote>
<ul>
<li>token:同服务端配置 token 保持一致</li>
</ul>
<pre><code class="hl language-ini"><span class="hl-section">[common]</span>
<span class="hl-attr">server_addr</span> = xxx.xxx.xxx.xxx 
<span class="hl-attr">server_port</span> = <span class="hl-number">7000</span>
<span class="hl-attr">token</span> = <span class="hl-number">12345678</span> 

<span class="hl-section">[rdp]</span>
<span class="hl-attr">type</span> = tcp
<span class="hl-attr">local_ip</span> = <span class="hl-number">127.0</span>.<span class="hl-number">0.1</span>
<span class="hl-attr">local_port</span> = <span class="hl-number">3389</span>
<span class="hl-attr">remote_port</span> = <span class="hl-number">7001</span>

<span class="hl-section">[smb]</span>
<span class="hl-attr">type</span> = tcp
<span class="hl-attr">local_ip</span> = <span class="hl-number">127.0</span>.<span class="hl-number">0.1</span>
<span class="hl-attr">local_port</span> = <span class="hl-number">445</span>
<span class="hl-attr">remote_port</span> = <span class="hl-number">7002</span>
</code></pre>
<blockquote>
<p>运行 <code>.\frpc.exe -c .\frpc.ini</code> 成功后即可在 <code>RD Client</code> 使用远程连接</p>
</blockquote>
<ul>
<li>注意：在设置登录账号的时候，密码不是 <code>pin</code>，而是你登录账号的 Microsoft 的账号的密码。</li>
<li>如果你要开机自启动，需要在 Windows 的 StartUp 中添加 bat 脚本</li>
</ul>
<pre><code class="hl language-bash">:: frp 放置位置
::C:\Users\你的账户\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup
:: frp 所在盘符 
e: 
<span class="hl-built_in">cd</span> 你的 frp 位置
.\frpc.exe -c .\frpc.ini
</code></pre>
<ul>
<li>以上所有端口都要在服务器中开启</li>
</ul>
<h2 id="安卓投屏到电脑">安卓投屏到电脑<a class="anchor" aria-label="Anchor" aria-hidden="true" data-anchorjs-icon="🔗" href="#安卓投屏到电脑"></a></h2>
<blockquote>
<p>需要下载两个软件 <a href="https://github.com/Genymobile/scrcpy/releases"><code>scrcpy</code></a> 和 <a href="https://developer.android.com/studio/releases/platform-tools"><code>platform-tools</code></a></p>
</blockquote>
<ul>
<li>我使用的是可视化：<a href="https://github.com/Tomotoes/scrcpy-gui/releases"><code>scrcpy-gui</code></a>
<ul>
<li>如果不使用可视化，可以看原作者地址，有很详细的教程 <a href="https://github.com/Genymobile/scrcpy/releases">https://github.com/Genymobile/scrcpy/releases</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>下载完成后需要设置系统环境变量，按照自己的下载地址设置</p>
</blockquote>
<ul>
<li>测试 adb 是否装好，如下是成功装好</li>
</ul>
<pre><code class="hl language-shell">C:\Users\15531>adb version
Android Debug Bridge version 1.0.41
Version 31.0.3-7562133
Installed as G:\Screen\platform-tools\adb.exe
</code></pre>
<blockquote>
<p>配置手机开发人员选项 (各个手机可能不同，以 mi10 举例)</p>
</blockquote>
<ol>
<li>使用以下操作：打开设置 > 更多设置 > 开发者选项 > USB 调试</li>
<li>使用数据线将手机和电脑连接</li>
<li>在 cmd 使用 <code>scrcpy</code> 如果成功投屏手机就代表设置成功</li>
<li>然后打开 <code>scrcpy-GUI</code> 会出现一个连接的手机设备</li>
<li>如果在同一个局域网下也是可以投屏的</li>
</ol>
        </article></main><script src="https://giscus.app/client.js"
        data-repo="fwqaaq/fwqaaq.github.io"
        data-repo-id="R_kgDOHCFK2A"
        data-category="Show and tell"
        data-category-id="DIC_kwDOHCFK2M4CYOLh"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async></script>